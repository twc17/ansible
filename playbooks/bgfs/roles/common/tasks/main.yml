---
- name: Add BeeGFS 7.0 client repo
  copy:
    src: beegfs-rhel7.repo
    dest: /etc/yum.repos.d/beegfs-rhel7.repo
    owner: root
    group: root
    mode: 0644
- name: Install packages required for BeeGFS
  yum:
    name: "{{ required_packages }}"
- name: Install BeeGFS packages
  yum:
    name: "{{ bgfs_packages }}"
- name: Copy over initial BeeGFS client config file
  copy:
    src: beegfs-client.conf
    dest: /etc/beegfs/beegfs-client.conf
    owner: root
    group: root
    mode: 0644
- name: Set BeeGFS mount point to /bgfs
  copy:
    content: '/bgfs /etc/beegfs/beegfs-client.conf'
    dest: /etc/beegfs/beegfs-mounts.conf
    owner: root
    group: root
    mode: 0644
- name: Set client autobuild parameters
  copy:
    src: beegfs-client-autobuild.conf
    dest: /etc/beegfs/beegfs-client-autobuild.conf
    owner: root
    group: root
    mode: 0644
